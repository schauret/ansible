---
- hosts: all
  become: true

  tasks:
    - name: Update APT package cache
      apt:
        update_cache: yes

    - name: Upgrade all APT packages
      apt:
        upgrade: dist
      
 - name: Install Prometheus NodeExporter
      apt:
        install: prometheus-node-exporter
          when: ansible_pkg_mgr == 'apt'  # Optional: ensures it's only run on Debian/Ubuntu systems
